# Xserver 設定チェックリスト

エックスサーバーへのデプロイ前に、以下の項目を確認してください。

## デプロイ前の確認事項

### ローカル環境での動作確認
- [ ] PHPビルトインサーバーで正常に動作することを確認
  ```bash
  php -S localhost:8000 -t public
  ```
- [ ] `/health` エンドポイントが正常に応答する
- [ ] `/tictactoe` が正常に表示される
- [ ] `/othello` が正常に表示される

### ファイルの確認
- [ ] `public/.htaccess` が存在する
- [ ] `public/php.ini` が存在する
- [ ] `public/error/404.html` が存在する
- [ ] `public/error/500.html` が存在する
- [ ] すべてのアセットファイル（CSS/JS）が `public/assets/` 配下にある

### 設定ファイルの内容確認
- [ ] `.htaccess` のRewriteルールが正しく設定されている
- [ ] `php.ini` のタイムゾーンが `Asia/Tokyo` に設定されている
- [ ] エラーページのパスが正しい（`/error/404.html`, `/error/500.html`）

## デプロイ後の確認事項

### 基本動作
- [ ] トップページ（`https://あなたのドメイン/`）にアクセスできる
- [ ] ゲーム選択画面が正しく表示される
- [ ] CSSとJavaScriptが正しく読み込まれている（スタイルが適用されている）

### ルーティング
- [ ] `/health` にアクセスして `{"status":"ok"}` が表示される
- [ ] `/tictactoe` にアクセスしてマルバツゲームが表示される
- [ ] `/othello` にアクセスしてオセロゲームが表示される
- [ ] `/rules` にアクセスしてルールページが表示される

### エラーページ
- [ ] 存在しないURL（例: `/nonexistent`）にアクセスして404ページが表示される
- [ ] 404ページのスタイルが正しく適用されている
- [ ] 404ページから「トップページに戻る」ボタンでトップに戻れる

### セキュリティ
- [ ] `/.htaccess` に直接アクセスできない（403 Forbiddenまたは404が表示される）
- [ ] `/php.ini` に直接アクセスできない（403 Forbiddenまたは404が表示される）
- [ ] ディレクトリリスティングが無効になっている

### パフォーマンス
- [ ] ブラウザの開発者ツールで静的ファイル（CSS/JS/画像）のキャッシュヘッダーが設定されている
- [ ] ページの読み込み速度が許容範囲内

### HTTPS（オプション、推奨）
- [ ] SSL証明書が設定されている
- [ ] HTTPSでアクセスできる
- [ ] HTTPからHTTPSへのリダイレクトが機能している（有効化した場合）

## トラブルシューティング用チェック

問題が発生した場合は以下を確認してください：

### 500 Internal Server Error が出る場合
- [ ] `.htaccess` の構文エラーがないか確認
- [ ] `php.ini` の設定値がエックスサーバーの制限内か確認
- [ ] ファイルのパーミッションが適切か確認（ディレクトリ: 755, ファイル: 644）
- [ ] エックスサーバーのエラーログを確認

### CSSやJavaScriptが読み込まれない場合
- [ ] `public/assets/` ディレクトリが正しくアップロードされているか
- [ ] ブラウザの開発者ツールのネットワークタブで404エラーがないか確認
- [ ] ファイルパスが正しいか確認（絶対パス `/assets/...` を使用）

### ルーティングが動作しない場合
- [ ] `.htaccess` が `public_html` 直下（または該当ドメインフォルダ直下）に配置されているか
- [ ] mod_rewriteが有効か（エックスサーバーでは通常有効）
- [ ] `RewriteEngine On` が設定されているか

### PHPバージョン関連
- [ ] サーバーパネルで PHP 8.1 以上に設定されているか
- [ ] PHP 8.2 または 8.3 を推奨（PHP 7.4はセキュリティサポート終了済み）

## デプロイ完了の最終確認

すべてのチェック項目が完了したら：

✅ **デプロイ成功！** エックスサーバーでアプリケーションが正常に動作しています。

---

**注意**: 本番環境では `php.ini` の `display_errors = 0` を維持し、エラーを直接表示しないようにしてください。エラーはサーバーパネルのエラーログで確認できます。
